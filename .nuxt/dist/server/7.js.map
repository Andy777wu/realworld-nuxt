{"version":3,"file":"7.js","sources":["webpack:///./pages/setting/index.vue?0b27","webpack:///./api/setting.js","webpack:///./pages/setting/index.vue","webpack:///./pages/setting/index.vue?2030","webpack:///./pages/setting/index.vue?6d1c"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"settings-page\"},[_vm._ssrNode(\"<div class=\\\"container page\\\"><div class=\\\"row\\\"><div class=\\\"col-md-6 offset-md-3 col-xs-12\\\"><h1 class=\\\"text-xs-center\\\">Your Settings</h1> <form><fieldset><fieldset class=\\\"form-group\\\"><input type=\\\"text\\\" placeholder=\\\"URL of profile picture\\\"\"+(_vm._ssrAttr(\"value\",(_vm.userObj.image)))+\" class=\\\"form-control\\\"></fieldset> <fieldset class=\\\"form-group\\\"><input type=\\\"text\\\" placeholder=\\\"Your Name\\\"\"+(_vm._ssrAttr(\"value\",(_vm.userObj.username)))+\" class=\\\"form-control form-control-lg\\\"></fieldset> <fieldset class=\\\"form-group\\\"><textarea rows=\\\"8\\\" placeholder=\\\"Short bio about you\\\" class=\\\"form-control form-control-lg\\\">\"+_vm._ssrEscape(_vm._s(_vm.userObj.bio))+\"</textarea></fieldset> <fieldset class=\\\"form-group\\\"><input type=\\\"text\\\" placeholder=\\\"Email\\\"\"+(_vm._ssrAttr(\"value\",(_vm.userObj.email)))+\" class=\\\"form-control form-control-lg\\\"></fieldset> <fieldset class=\\\"form-group\\\"><input type=\\\"password\\\" placeholder=\\\"Password\\\"\"+(_vm._ssrAttr(\"value\",(_vm.userObj.password)))+\" class=\\\"form-control form-control-lg\\\"></fieldset> <button class=\\\"btn btn-lg btn-primary pull-xs-right\\\">\\n                Update Settings\\n              </button></fieldset></form> <button class=\\\"btn btn-outline-danger\\\">\\n          Or click here to logout.\\n        </button></div></div></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { request } from '@/plugins/request.js'\r\n// PUT /api/user\r\nexport const updateSet = (data)=>{\r\n    return request({\r\n        url: `/api/user`,\r\n        method: 'PUT',\r\n        data\r\n    })\r\n}\r\n\r\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport cookie from 'js-cookie'\r\nimport { updateSet } from '@/api/setting.js'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n    middleware: 'auth',\r\n    data() {\r\n      return {\r\n        userObj: {\r\n          username: '',\r\n          image: '',\r\n          password: '',\r\n          email: '',\r\n          bio: ''\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState(['user'])\r\n    },\r\n    created() {\r\n      this.init()\r\n    },\r\n    methods: {\r\n      init() {\r\n        for (const key in this.user) {\r\n          this.userObj[key] = this.user[key]\r\n        }\r\n      },\r\n      logout() {\r\n        cookie.remove('user')\r\n        this.$store.commit('setUser', null)\r\n        this.$router.push('/login')\r\n      },\r\n      async updateSetting() {\r\n        const user = {} \r\n        for (const key in this.userObj) {\r\n          if(this.userObj[key]) {\r\n            user[key] = this.userObj[key]\r\n          }\r\n        }\r\n        const { data } = await updateSet({\r\n          user\r\n        })\r\n        this.$store.commit('setUser', data.user)\r\n        this.$router.push({\r\n          name: 'profile',\r\n          params: {\r\n            username: this.user.username\r\n          }\r\n        })\r\n      }\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=72f6cc30&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"cf5eea5c\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AADA;AASA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AA7BA;AAnBA;;AC/CA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}